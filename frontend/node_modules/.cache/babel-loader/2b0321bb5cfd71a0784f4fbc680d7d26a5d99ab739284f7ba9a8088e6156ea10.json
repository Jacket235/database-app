{"ast":null,"code":"var _jsxFileName = \"X:\\\\Other\\\\Coding\\\\React\\\\database-app\\\\frontend\\\\src\\\\components\\\\ManageTimelineModal.tsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport modifyEvents from \"../functions/modifyEvents\";\nimport { useAuth } from \"../context/AuthContext\";\nimport modifyConnections from \"../functions/modifyConnections\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ManageTimelineModal({\n  show,\n  onClose,\n  events,\n  setEvents,\n  connections,\n  setConnections\n}) {\n  _s();\n  var _selectedEvent$id;\n  const [activeTab, setActiveTab] = useState(\"events\");\n  const [selectedStep, setSelectedStep] = useState(-1);\n  const [selectedEvent, setSelectedEvent] = useState();\n  const [tempEvents, setTempEvents] = useState(events);\n  const [tempConnections, setTempConnections] = useState(connections);\n  const [draggedEventId, setDraggedEventId] = useState(null);\n  const {\n    accessToken\n  } = useAuth();\n  if (!show) return null;\n  function checkForEventMods(original, updated) {\n    const originalMap = new Map(original.map(e => [e.id, e]));\n    const updatedMap = new Map(updated.map(e => [e.id, e]));\n    const added = [];\n    const modified = [];\n    const removed = [];\n\n    // Check added & modified\n    for (const updatedEvent of updated) {\n      const originalEvent = originalMap.get(updatedEvent.id);\n      if (!originalEvent) {\n        added.push(updatedEvent); // new event\n      } else if (updatedEvent.name !== originalEvent.name || updatedEvent.step_id !== originalEvent.step_id || updatedEvent.position !== originalEvent.position) {\n        modified.push(updatedEvent); // changed event\n      }\n    }\n\n    // Check removed\n    for (const originalEvent of original) {\n      if (!updatedMap.has(originalEvent.id)) {\n        removed.push(originalEvent);\n      }\n    }\n    return {\n      added,\n      modified,\n      removed\n    };\n  }\n  function checkForConnectionMods(original, updated) {\n    const originalSet = new Set(original.map(conn => `${conn.from_event_id}->${conn.to_event_id}`));\n    const updatedSet = new Set(updated.map(conn => `${conn.from_event_id}->${conn.to_event_id}`));\n    const connected = Array.from(updatedSet).filter(key => !originalSet.has(key)).map(key => {\n      const [from, to] = key.split(\"->\").map(Number);\n      return {\n        from_event_id: from,\n        to_event_id: to\n      };\n    });\n    const disconnected = Array.from(originalSet).filter(key => !updatedSet.has(key)).map(key => {\n      const [from, to] = key.split(\"->\").map(Number);\n      return {\n        from_event_id: from,\n        to_event_id: to\n      };\n    });\n    return {\n      connected,\n      disconnected\n    };\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal d-block\",\n    tabIndex: -1,\n    style: {\n      backgroundColor: 'rgba(0,0,0,0.5)'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"modal-title\",\n            children: \"Manage your timeline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-close\",\n            onClick: () => onClose()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"nav nav-tabs mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `nav-link ${activeTab === \"events\" ? \"active\" : \"\"}`,\n                onClick: () => setActiveTab(\"events\"),\n                children: \"Modify Events\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `nav-link ${activeTab === \"connections\" ? \"active\" : \"\"}`,\n                onClick: () => setActiveTab(\"connections\"),\n                children: \"Modify Connections\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this), activeTab === \"events\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-floating mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: selectedStep !== null && selectedStep !== void 0 ? selectedStep : -1,\n                onChange: e => setSelectedStep(Number(e.target.value)),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"-1\",\n                  children: \"Step\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 41\n                }, this), [0, 1, 2, 3].map(i => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: i,\n                  children: i + 1\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 45\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Select the step to modify\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 33\n            }, this), selectedStep !== -1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3 d-flex flex-column\",\n              children: selectedStep !== -1 && tempEvents.filter(e => e.step_id === selectedStep).sort((a, b) => a.position - b.position).map(event => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border rounded p-1 my-1 d-flex justify-content-between align-items-center\",\n                draggable: true,\n                style: {\n                  cursor: \"move\"\n                },\n                onDragStart: () => setDraggedEventId(event.id),\n                onDragOver: e => e.preventDefault(),\n                onDrop: () => {\n                  if (draggedEventId === null || draggedEventId === event.id) return;\n                  const draggedIndex = tempEvents.findIndex(e => e.id === draggedEventId);\n                  const dropIndex = tempEvents.findIndex(e => e.id === event.id);\n                  const updated = [...tempEvents];\n                  const [movedItem] = updated.splice(draggedIndex, 1);\n                  updated.splice(dropIndex, 0, movedItem);\n                  const stepEvents = updated.filter(e => e.step_id === selectedStep);\n                  const otherEvents = updated.filter(e => e.step_id !== selectedStep);\n                  const reordered = stepEvents.map((e, i) => ({\n                    ...e,\n                    position: i\n                  }));\n                  setTempEvents([...otherEvents, ...reordered]);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control no-outline\",\n                  value: event.name,\n                  onChange: e => {\n                    const updated = tempEvents.map(ev => ev.id === event.id ? {\n                      ...ev,\n                      name: e.target.value\n                    } : ev);\n                    setTempEvents(updated);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  onClick: () => {\n                    const updated = tempEvents.filter(e => e.id !== event.id);\n                    const stepEvents = updated.filter(e => e.step_id === selectedStep);\n                    const otherEvents = updated.filter(e => e.step_id !== selectedStep);\n                    const reordered = stepEvents.map((e, i) => ({\n                      ...e,\n                      position: i\n                    }));\n                    setTempEvents([...otherEvents, ...reordered]);\n                  },\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 53\n                }, this)]\n              }, event.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 49\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-1\",\n              children: selectedStep !== -1 && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => {\n                  if (selectedStep == null) return;\n                  const stepEvents = tempEvents.filter(e => e.step_id === selectedStep);\n                  const newEvent = {\n                    id: -Date.now(),\n                    name: \"New Event\",\n                    step_id: selectedStep,\n                    position: stepEvents.length\n                  };\n                  setTempEvents([...tempEvents, newEvent]);\n                },\n                children: \"Add Event\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true), activeTab === \"connections\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-floating mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: (_selectedEvent$id = selectedEvent === null || selectedEvent === void 0 ? void 0 : selectedEvent.id) !== null && _selectedEvent$id !== void 0 ? _selectedEvent$id : -1,\n                onChange: e => {\n                  const id = Number(e.target.value);\n                  const selected = tempEvents.find(eve => eve.id === id);\n                  setSelectedEvent(selected);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"-1\",\n                  children: \"Select event\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 41\n                }, this), tempEvents.map(event => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: event.id,\n                  children: event.name\n                }, event.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 45\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Select an event in your timeline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 33\n            }, this), selectedEvent && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3 d-flex flex-column\",\n              children: tempEvents.filter(e => e.step_id > selectedEvent.step_id).map(event => {\n                const isConnected = tempConnections.some(conn => conn.from_event_id === selectedEvent.id && conn.to_event_id === event.id);\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"border rounded p-1 my-1 d-flex justify-content-between align-items-center\",\n                  children: [event.name, /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: `btn ${isConnected ? \"btn-outline-danger\" : \"btn-outline-primary\"}`,\n                    onClick: () => {\n                      if (isConnected) {\n                        setTempConnections(prev => prev.filter(conn => !(conn.from_event_id === selectedEvent.id && conn.to_event_id === event.id)));\n                      } else {\n                        setTempConnections(prev => [...prev, {\n                          from_event_id: selectedEvent.id,\n                          to_event_id: event.id\n                        }]);\n                      }\n                    },\n                    children: isConnected ? \"Disconnect\" : \"Connect\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 57\n                  }, this)]\n                }, event.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 53\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: async () => {\n              try {\n                const {\n                  added,\n                  modified,\n                  removed\n                } = checkForEventMods(events, tempEvents);\n                const {\n                  connected,\n                  disconnected\n                } = checkForConnectionMods(connections, tempConnections);\n                console.log(\"Sending EVENTS...\");\n                const resEvents = await modifyEvents(accessToken, added, modified, removed);\n                console.log(\"EVENTS response:\", resEvents);\n                console.log(\"Sending CONNECTIONS...\");\n                const resConnections = await modifyConnections(accessToken, connected, disconnected);\n                console.log(\"CONNECTIONS response:\", resConnections);\n                setEvents(tempEvents);\n                setConnections(tempConnections);\n                onClose();\n              } catch (err) {\n                console.error(\"Save failed:\", err);\n              }\n            },\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: () => onClose(),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 9\n  }, this);\n}\n_s(ManageTimelineModal, \"Nq761R4x/vZSugYVW2jl1IIcSYM=\", false, function () {\n  return [useAuth];\n});\n_c = ManageTimelineModal;\nvar _c;\n$RefreshReg$(_c, \"ManageTimelineModal\");","map":{"version":3,"names":["useState","modifyEvents","useAuth","modifyConnections","jsxDEV","_jsxDEV","Fragment","_Fragment","ManageTimelineModal","show","onClose","events","setEvents","connections","setConnections","_s","_selectedEvent$id","activeTab","setActiveTab","selectedStep","setSelectedStep","selectedEvent","setSelectedEvent","tempEvents","setTempEvents","tempConnections","setTempConnections","draggedEventId","setDraggedEventId","accessToken","checkForEventMods","original","updated","originalMap","Map","map","e","id","updatedMap","added","modified","removed","updatedEvent","originalEvent","get","push","name","step_id","position","has","checkForConnectionMods","originalSet","Set","conn","from_event_id","to_event_id","updatedSet","connected","Array","from","filter","key","to","split","Number","disconnected","className","tabIndex","style","backgroundColor","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","onChange","target","i","sort","a","b","event","draggable","cursor","onDragStart","onDragOver","preventDefault","onDrop","draggedIndex","findIndex","dropIndex","movedItem","splice","stepEvents","otherEvents","reordered","ev","newEvent","Date","now","length","selected","find","eve","isConnected","some","prev","console","log","resEvents","resConnections","err","error","_c","$RefreshReg$"],"sources":["X:/Other/Coding/React/database-app/frontend/src/components/ManageTimelineModal.tsx"],"sourcesContent":["import { SetStateAction, Dispatch, useState } from \"react\";\r\nimport modifyEvents from \"../functions/modifyEvents\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport modifyConnections from \"../functions/modifyConnections\";\r\n\r\ninterface Event {\r\n    id: number;\r\n    name: string;\r\n    step_id: number;\r\n    position: number;\r\n}\r\n\r\ninterface Connection {\r\n    from_event_id: number,       // Event ID from\r\n    to_event_id: number          // Event ID to\r\n}\r\n\r\ninterface Props {\r\n    show: boolean;\r\n    onClose: () => void;\r\n    events: Event[];\r\n    setEvents: Dispatch<SetStateAction<Event[]>>;\r\n    connections: Connection[];\r\n    setConnections: Dispatch<SetStateAction<Connection[]>>;\r\n}\r\n\r\nexport default function ManageTimelineModal({ show, onClose, events, setEvents, connections, setConnections }: Props) {\r\n    const [activeTab, setActiveTab] = useState<\"events\" | \"connections\">(\"events\");\r\n    const [selectedStep, setSelectedStep] = useState<number>(-1);\r\n    const [selectedEvent, setSelectedEvent] = useState<Event>();\r\n    const [tempEvents, setTempEvents] = useState(events);\r\n    const [tempConnections, setTempConnections] = useState<Connection[]>(connections);\r\n    const [draggedEventId, setDraggedEventId] = useState<number | null>(null);\r\n    const { accessToken } = useAuth();\r\n\r\n    if (!show) return null;\r\n\r\n    interface EventChanges {\r\n        added: Event[];\r\n        modified: Event[];\r\n        removed: Event[];\r\n    }\r\n\r\n    function checkForEventMods(original: Event[], updated: Event[]): EventChanges {\r\n        const originalMap = new Map(original.map(e => [e.id, e]));\r\n        const updatedMap = new Map(updated.map(e => [e.id, e]));\r\n\r\n        const added: Event[] = [];\r\n        const modified: Event[] = [];\r\n        const removed: Event[] = [];\r\n\r\n        // Check added & modified\r\n        for (const updatedEvent of updated) {\r\n            const originalEvent = originalMap.get(updatedEvent.id);\r\n            if (!originalEvent) {\r\n                added.push(updatedEvent); // new event\r\n            } else if (\r\n                updatedEvent.name !== originalEvent.name ||\r\n                updatedEvent.step_id !== originalEvent.step_id ||\r\n                updatedEvent.position !== originalEvent.position\r\n            ) {\r\n                modified.push(updatedEvent); // changed event\r\n            }\r\n        }\r\n\r\n        // Check removed\r\n        for (const originalEvent of original) {\r\n            if (!updatedMap.has(originalEvent.id)) {\r\n                removed.push(originalEvent);\r\n            }\r\n        }\r\n\r\n        return { added, modified, removed };\r\n    }\r\n\r\n    function checkForConnectionMods(original: Connection[], updated: Connection[]) {\r\n        const originalSet = new Set(original.map(conn => `${conn.from_event_id}->${conn.to_event_id}`));\r\n        const updatedSet = new Set(updated.map(conn => `${conn.from_event_id}->${conn.to_event_id}`));\r\n\r\n        const connected = Array.from(updatedSet)\r\n            .filter(key => !originalSet.has(key))\r\n            .map(key => {\r\n                const [from, to] = key.split(\"->\").map(Number);\r\n                return { from_event_id: from, to_event_id: to };\r\n            });\r\n\r\n        const disconnected = Array.from(originalSet)\r\n            .filter(key => !updatedSet.has(key))\r\n            .map(key => {\r\n                const [from, to] = key.split(\"->\").map(Number);\r\n                return { from_event_id: from, to_event_id: to };\r\n            });\r\n\r\n\r\n        return { connected, disconnected };\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal d-block\" tabIndex={-1} style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}>\r\n            <div className=\"modal-dialog\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\">Manage your timeline</h5>\r\n                        <button className=\"btn-close\" onClick={() => onClose()}></button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <ul className=\"nav nav-tabs mb-3\">\r\n                            <li className=\"nav-item\">\r\n                                <button\r\n                                    className={`nav-link ${activeTab === \"events\" ? \"active\" : \"\"}`}\r\n                                    onClick={() => setActiveTab(\"events\")}\r\n                                >\r\n                                    Modify Events\r\n                                </button>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <button\r\n                                    className={`nav-link ${activeTab === \"connections\" ? \"active\" : \"\"}`}\r\n                                    onClick={() => setActiveTab(\"connections\")}\r\n                                >\r\n                                    Modify Connections\r\n                                </button>\r\n                            </li>\r\n                        </ul>\r\n\r\n                        {activeTab === \"events\" && (\r\n                            <>\r\n                                <div className=\"form-floating mb-3\">\r\n                                    <select className=\"form-select\" value={selectedStep ?? -1} onChange={(e) => setSelectedStep(Number(e.target.value))}>\r\n                                        <option value=\"-1\">Step</option>\r\n                                        {[0, 1, 2, 3].map(i => (\r\n                                            <option key={i} value={i}>{i + 1}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                    <label>Select the step to modify</label>\r\n                                </div>\r\n                                {selectedStep !== -1 && (\r\n                                    <div className=\"mb-3 d-flex flex-column\">\r\n                                        {selectedStep !== -1 && tempEvents\r\n                                            .filter(e => e.step_id === selectedStep)\r\n                                            .sort((a, b) => a.position - b.position)\r\n                                            .map(event => (\r\n                                                <div\r\n                                                    key={event.id}\r\n                                                    className=\"border rounded p-1 my-1 d-flex justify-content-between align-items-center\"\r\n                                                    draggable\r\n                                                    style={{ cursor: \"move\" }}\r\n                                                    onDragStart={() => setDraggedEventId(event.id)}\r\n                                                    onDragOver={e => e.preventDefault()}\r\n                                                    onDrop={() => {\r\n                                                        if (draggedEventId === null || draggedEventId === event.id) return;\r\n\r\n                                                        const draggedIndex = tempEvents.findIndex(e => e.id === draggedEventId);\r\n                                                        const dropIndex = tempEvents.findIndex(e => e.id === event.id);\r\n                                                        const updated = [...tempEvents];\r\n                                                        const [movedItem] = updated.splice(draggedIndex, 1);\r\n                                                        updated.splice(dropIndex, 0, movedItem);\r\n\r\n                                                        const stepEvents = updated.filter(e => e.step_id === selectedStep);\r\n                                                        const otherEvents = updated.filter(e => e.step_id !== selectedStep);\r\n                                                        const reordered = stepEvents.map((e, i) => ({ ...e, position: i }));\r\n\r\n                                                        setTempEvents([...otherEvents, ...reordered]);\r\n                                                    }}\r\n                                                >\r\n                                                    {/* {event.name} */}\r\n                                                    <input\r\n                                                        className=\"form-control no-outline\"\r\n                                                        value={event.name}\r\n                                                        onChange={(e) => {\r\n                                                            const updated = tempEvents.map(ev => ev.id === event.id ? { ...ev, name: e.target.value } : ev);\r\n                                                            setTempEvents(updated)\r\n                                                        }}\r\n                                                    />\r\n                                                    <button\r\n                                                        className=\"btn btn-danger\"\r\n                                                        onClick={() => {\r\n                                                            const updated = tempEvents.filter(e => e.id !== event.id);\r\n                                                            const stepEvents = updated.filter(e => e.step_id === selectedStep);\r\n                                                            const otherEvents = updated.filter(e => e.step_id !== selectedStep);\r\n                                                            const reordered = stepEvents.map((e, i) => ({ ...e, position: i }));\r\n                                                            setTempEvents([...otherEvents, ...reordered]);\r\n                                                        }}>\r\n                                                        Remove\r\n                                                    </button>\r\n                                                </div>\r\n                                            ))}\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"mb-1\">\r\n                                    {selectedStep !== -1 && (\r\n                                        <button className=\"btn btn-success\" onClick={() => {\r\n                                            if (selectedStep == null) return;\r\n\r\n                                            const stepEvents = tempEvents.filter(e => e.step_id === selectedStep);\r\n                                            const newEvent = {\r\n                                                id: -Date.now(),\r\n                                                name: \"New Event\",\r\n                                                step_id: selectedStep,\r\n                                                position: stepEvents.length\r\n                                            };\r\n                                            setTempEvents([...tempEvents, newEvent]);\r\n                                        }}>\r\n                                            Add Event\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                        {activeTab === \"connections\" && (\r\n                            <>\r\n                                <div className=\"form-floating mb-3\">\r\n                                    <select className=\"form-select\"\r\n                                        value={selectedEvent?.id ?? -1}\r\n                                        onChange={e => {\r\n                                            const id = Number(e.target.value);\r\n                                            const selected = tempEvents.find(eve => eve.id === id)\r\n                                            setSelectedEvent(selected);\r\n                                        }}>\r\n                                        <option value=\"-1\">Select event</option>\r\n                                        {tempEvents.map(event => (\r\n                                            <option key={event.id} value={event.id}>{event.name}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                    <label>Select an event in your timeline</label>\r\n                                </div>\r\n                                {selectedEvent && (\r\n                                    <div className=\"mb-3 d-flex flex-column\">\r\n                                        {tempEvents\r\n                                            .filter(e => e.step_id > selectedEvent.step_id)\r\n                                            .map(event => {\r\n                                                const isConnected = tempConnections.some(conn =>\r\n                                                    conn.from_event_id === selectedEvent.id &&\r\n                                                    conn.to_event_id === event.id\r\n                                                );\r\n\r\n                                                return (\r\n                                                    <div\r\n                                                        key={event.id}\r\n                                                        className=\"border rounded p-1 my-1 d-flex justify-content-between align-items-center\"\r\n                                                    >\r\n                                                        {event.name}\r\n                                                        <button\r\n                                                            className={`btn ${isConnected ? \"btn-outline-danger\" : \"btn-outline-primary\"}`}\r\n                                                            onClick={() => {\r\n                                                                if (isConnected) {\r\n                                                                    setTempConnections(prev =>\r\n                                                                        prev.filter(conn => !(\r\n                                                                            conn.from_event_id === selectedEvent.id &&\r\n                                                                            conn.to_event_id === event.id\r\n                                                                        ))\r\n                                                                    );\r\n                                                                } else {\r\n                                                                    setTempConnections(prev => [...prev, {\r\n                                                                        from_event_id: selectedEvent.id,\r\n                                                                        to_event_id: event.id,\r\n                                                                    }]);\r\n                                                                }\r\n                                                            }}>\r\n                                                            {isConnected ? \"Disconnect\" : \"Connect\"}\r\n                                                        </button>\r\n                                                    </div>\r\n                                                );\r\n                                            })}\r\n                                    </div>\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        <button\r\n                            className=\"btn btn-primary\"\r\n                            onClick={async () => {\r\n                                try {\r\n                                    const { added, modified, removed } = checkForEventMods(events, tempEvents);\r\n                                    const { connected, disconnected } = checkForConnectionMods(connections, tempConnections);\r\n\r\n                                    console.log(\"Sending EVENTS...\");\r\n                                    const resEvents = await modifyEvents(accessToken, added, modified, removed);\r\n                                    console.log(\"EVENTS response:\", resEvents);\r\n\r\n                                    console.log(\"Sending CONNECTIONS...\");\r\n                                    const resConnections = await modifyConnections(accessToken, connected, disconnected);\r\n                                    console.log(\"CONNECTIONS response:\", resConnections);\r\n\r\n                                    setEvents(tempEvents);\r\n                                    setConnections(tempConnections);\r\n                                    onClose();\r\n                                } catch (err) {\r\n                                    console.error(\"Save failed:\", err);\r\n                                }\r\n                            }}\r\n                        >\r\n                            Save\r\n                        </button>\r\n                        <button className=\"btn btn-danger\" onClick={() => onClose()}>\r\n                            Cancel\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}